(this.webpackJsonptenttiapp=this.webpackJsonptenttiapp||[]).push([[0],{104:function(t,e){},107:function(t){t.exports=JSON.parse('{"app.vaihda-kieli-button":"Vaihda Kieli","app.tentit-button":"Tentit","app.tarkista-state-button":"Tarkista State","app.vaihda-normik\xe4ytt\xe4j\xe4ksi-buttonn":"Vaihda Normik\xe4ytt\xe4j\xe4ksi","app.vaihda-adminiksi-button":"Vaihda Adminiksi","app.kirjaudu-ulos-button":"Kirjaudu Ulos","app.kirjautuminen-title":"Kirjautuminen","app.tilinluonti-title":"Tilin luonti","app.uusi-tili-button":"Uusi Tili","app.kirjaudu-button":"Kirjaudu","app.luo-tili-button":"Luo Tili","app.takaisin-kirjautumiseen-button":"Takaisin Kirjautumiseen","app.k\xe4ytt\xe4j\xe4tunnus-placeholder":"K\xe4ytt\xe4j\xe4tunnus","app.salasana-placeholder":"Salasana","app.salasana-uudelleen-placeholder":"Salasana Uudestaan","app.n\xe4yt\xe4-vastaukset-button":"N\xe4yt\xe4 Vastaukset","app.piilota-vastaukset-button":"Piilota Vastaukset","app.n\xe4yt\xe4-graafi-button":"N\xe4yt\xe4 Graafi"}')},108:function(t){t.exports=JSON.parse('{"app.vaihda-kieli-button":"Change Language","app.tentit-button":"Exams","app.tarkista-state-button":"Check State","app.vaihda-normik\xe4ytt\xe4j\xe4ksi-button":"Change to Normal User","app.vaihda-adminiksi-button":"Change to Admin","app.kirjaudu-ulos-button":"Log out","app.kirjautuminen-title":"Login","app.tilinluonti-title":"Account Creation","app.uusi-tili-button":"New Account","app.kirjaudu-button":"Login","app.luo-tili-button":"Create Account","app.takaisin-kirjautumiseen-button":"Back to Login","app.k\xe4ytt\xe4j\xe4tunnus-placeholder":"Username","app.salasana-placeholder":"Password","app.salasana-uudelleen-placeholder":"Password Again","app.n\xe4yt\xe4-vastaukset-button":"Show Answers","app.piilota-vastaukset-button":"Hide Answers","app.n\xe4yt\xe4-graafi-button":"Show Graph"}')},134:function(t,e){},140:function(t,e){},259:function(t,e,a){},260:function(t,e,a){},261:function(t,e,a){"use strict";a.r(e);var n=a(2),i=a(0),r=a.n(i),s=a(14),o=a.n(s),u=a(16),c=a(19),l=a(13),d=a(105),p=a.n(d),h=a(106),j=a.n(h),y=a(107),b=a(108),f=a(10),k=a(6),v=a.n(k),m=a(8),x=a(294),g=a(295),O=a(299),w=a(262),T=a(7),C=a(59),K=Object(T.a)({root:{color:C.a[400],"&$checked":{color:C.a[600]}},checked:{}})((function(t){return Object(n.jsx)(O.a,Object(f.a)({color:"default"},t))}));var S=function(t){var e=t.kysymys,a=e.kysymys,r=e.vastausVaihtoehdot,s=Object(i.useContext)(St).state,o=function(t){var e=s.vastaukset.filter((function(e){return e.vaihtoehto_id===t}));return 0!==e.length&&e[0].tyyppi};return Object(n.jsx)(w.a,{style:{width:"100%",padding:15},children:Object(n.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[s.n\u00e4yt\u00e4Vastaukset?Object(n.jsxs)("div",{children:[a,r.map((function(t,e){return Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginTop:10},children:[Object(n.jsx)(O.a,{checked:o(t.id),color:"primary",disableRipple:!0,inputProps:{"aria-label":"secondary checkbox"}}),Object(n.jsx)(K,{checked:t.oikea_vastaus,color:"primary",disableRipple:!0,inputProps:{"aria-label":"secondary checkbox"}}),t.vaihtoehto]},e)}))]}):Object(n.jsxs)("div",{style:{},children:[a,r.map((function(e,a){return Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginTop:10},children:[Object(n.jsx)(O.a,{checked:o(e.id),onChange:function(){return function(e){var a=s.vastaukset.filter((function(t){return t.vaihtoehto_id===e}));0!==a.length?t.handleCheckboxChange(e,a[0].id):t.handleCheckboxChange(e,void 0)}(e.id)},inputProps:{"aria-label":"primary checkbox"}}),e.vaihtoehto]},a)}))]}),Object(n.jsx)("div",{style:{padding:50}})]})})},V=a.p+"static/media/selmaSpin.e96f6d9a.gif",I=a(26),L=a(300),D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(L.a)(),e={id:t,kuvaus:"Kysymyksen kuvaus",vastausVaihtoehdot:[],oikeatVastaukset:[]};return e},M=function(t){return{id:t.id,aihe_id:t.aihe_id,kysymys:t.kysymys,vastausVaihtoehdot:t.vastausVaihtoehdot,oikeatVastaukset:[]}},P={baseURL:"https://fullstacktenttiapp.azurewebsites.net"},U=a(9),A=a.n(U),R=function(){var t=Object(m.a)(v.a.mark((function t(e){var a,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwtToken"))}},t.next=4,A.a.get(P.baseURL+"/user/vastausvaihtoehto/kysymys/"+e.id,a);case 4:if("OK"!==(n=t.sent).statusText){t.next=10;break}return e.vastausVaihtoehdot=n.data,t.abrupt("return",e);case 10:throw"vastausvaihtoehto haku ei onnistunut";case 11:t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(0),t.t0;case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),B=function(){var t=Object(m.a)(v.a.mark((function t(e){var a,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwtToken"))}},t.prev=1,t.next=4,A.a.post(P.baseURL+"/authenticated/vastausvaihtoehto/",e,a);case 4:if("OK"!==(n=t.sent).statusText){t.next=9;break}return t.abrupt("return",n.data.toString());case 9:throw"vastausvaihtoehto lis\xe4ys ei onnistunut";case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(1),t.t0;case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}(),N=function(){var t=Object(m.a)(v.a.mark((function t(e){var a,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwtToken"))}},t.prev=1,t.next=4,A.a.delete(P.baseURL+"/authenticated/vastausvaihtoehto/"+e,a);case 4:if("OK"!==(n=t.sent).statusText){t.next=9;break}return t.abrupt("return",n);case 9:throw"vastausvaihtoehto poisto ei onnistunut";case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(1),t.t0;case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}(),z=function(){var t=Object(m.a)(v.a.mark((function t(e,a){var n,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwtToken"))}},t.prev=1,t.next=4,A.a.put(P.baseURL+"/authenticated/vastausvaihtoehto/"+e,a,n);case 4:if("OK"!==(i=t.sent).statusText){t.next=9;break}return t.abrupt("return",i);case 9:throw"vastausvaihtoehto muokkaus ei onnistunut";case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(1),t.t0;case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,a){return t.apply(this,arguments)}}(),G=function(){var t=Object(m.a)(v.a.mark((function t(e){var a,n,i,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwtToken"))}},t.prev=1,t.next=4,A.a.get(P.baseURL+"/authenticated/tenttikysymys/"+e,a);case 4:if("OK"!==(n=t.sent).statusText){t.next=13;break}return console.log("Tenttikysymys "+e),console.log(n.data),i=n.data,r=i.map((function(t){return R(t)})),t.abrupt("return",Promise.all(r).then((function(t){return t})));case 13:throw"Tenttikysymyshaussa ongelmia";case 14:t.next=19;break;case 16:throw t.prev=16,t.t0=t.catch(1),t.t0;case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}(),_=function(){var t=Object(m.a)(v.a.mark((function t(e,a){var n,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwtToken"))}},i={tentti_id:e,kysymys_id:a},t.prev=2,t.next=5,A.a.post(P.baseURL+"/authenticated/tenttikysymys/",i,n);case 5:if("OK"!==t.sent.statusText){t.next=10;break}return t.abrupt("return",!0);case 10:throw"Tenttilis\xe4yksess\xe4 ongelmia";case 11:t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(2),t.t0;case 16:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e,a){return t.apply(this,arguments)}}(),J=function(){var t=Object(m.a)(v.a.mark((function t(e){var a,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwtToken"))}},t.next=4,A.a.post(P.baseURL+"/user/vastaus/",e,a);case 4:if("OK"!==(n=t.sent).statusText){t.next=9;break}return t.abrupt("return",n.data);case 9:throw"Vastaus lis\xe4ys ei onnistunut";case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),E=function(){var t=Object(m.a)(v.a.mark((function t(e,a){var n,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwtToken"))}},console.log("Haetaan k\xe4ytt\xe4j\xe4n vastaukset"),t.next=5,A.a.get(P.baseURL+"/user/vastaus/kayttaja/"+e+"/tentti/"+a,n);case 5:if("OK"!==(i=t.sent).statusText){t.next=11;break}return console.log(i),t.abrupt("return",i);case 11:throw"haeK\xe4ytt\xe4j\xe4nVastauksetTenttiin ongelmia";case 12:t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(0),t.t0;case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,a){return t.apply(this,arguments)}}(),W=function(){var t=Object(m.a)(v.a.mark((function t(e){var a,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwtToken"))}},t.next=4,A.a.put(P.baseURL+"/user/vastaus/"+e.id,e,a);case 4:if("OK"!==(n=t.sent).statusText){t.next=9;break}return t.abrupt("return",n);case 9:throw"Tentin muokkauksessa ongelmia";case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),H=Object(l.d)({btnVaihdaKieli:{id:"app.vaihda-kieli-button",defaultMessage:"Vaihda Kieli",description:"Vaihtaa kielen englannin ja suomen v\xe4lill\xe4"},btnTentti:{id:"app.tentit-button",defaultMessage:"Tentit",description:"N\xe4ytt\xe4\xe4 tentit"},btnTarkistaState:{id:"app.tarkista-state-button",defaultMessage:"Tarkista State",description:"Console loggaa staten"},"btnVaihdaNormik\xe4ytt\xe4j\xe4ksi":{id:"app.vaihda-normik\xe4ytt\xe4j\xe4ksi-button",defaultMessage:"Vaihda Normik\xe4ytt\xe4j\xe4ksi",description:"Vaihtaa k\xe4ytt\xe4j\xe4roolin normik\xe4ytt\xe4j\xe4ksi"},btnVaihdaAdminiksi:{id:"app.vaihda-adminiksi-button",defaultMessage:"Vaihda Adminiksi",description:"Vaihtaa k\xe4ytt\xe4j\xe4roolin adminiksi"},btnKirjauduUlos:{id:"app.kirjaudu-ulos-button",defaultMessage:"Kirjaudu Ulos",description:"Kirjautuu ulos tenttiappista"},btnUusiTili:{id:"app.uusi-tili-button",defaultMessage:"Uusi Tili",description:"Siirtyy n\xe4kym\xe4\xe4n jossa lis\xe4t\xe4\xe4n uutta tili\xe4"},btnKirjaudu:{id:"app.kirjaudu-button",defaultMessage:"Kirjaudu",description:"Kirjautuu sis\xe4\xe4n tenttiappiin"},btnLuoTili:{id:"app.luo-tili-button",defaultMessage:"Luo Tili",description:"Luo uuden k\xe4ytt\xe4j\xe4tilin"},btnTakaisinKirjautumiseen:{id:"app.takaisin-kirjautumiseen-button",defaultMessage:"Takaisin Kirjautumiseen",description:"Palaa k\xe4ytt\xe4j\xe4n luonnista takasin kirjautumissivulle"},"btnN\xe4yt\xe4vastaukset":{id:"app.n\xe4yt\xe4-vastaukset-button",defaultMessage:"N\xe4yt\xe4 Vastaukset",description:"N\xe4ytt\xe4\xe4 vastaukset"},btnPiilotaVastaukset:{id:"app.piilota-vastaukset-button",defaultMessage:"Piilota Vastaukset",description:"Piilottaa vastaukset"},"btnN\xe4yt\xe4Graafi":{id:"app.n\xe4yt\xe4-graafi-button",defaultMessage:"N\xe4yt\xe4 Graafi",description:"N\xe4ytt\xe4\xe4 demograafit"},titleKirjautuminen:{id:"app.kirjautuminen-title",defaultMessage:"Kirjautuminen",description:"Kirjautumisotsikko login-sivulla"},titleTilinluonti:{id:"app.tilinluonti-title",defaultMessage:"Tilin luonti",description:"Kirjautumisotsikko tilinluomis-sivulla"},"PlaceholderK\xe4ytt\xe4j\xe4tunnus":{id:"app.k\xe4ytt\xe4j\xe4tunnus-placeholder",defaultMessage:"K\xe4ytt\xe4j\xe4tunnus",description:"Placeholder teksti k\xe4ytt\xe4j\xe4tunnus-kent\xe4ss\xe4"},PlaceholderSalasana:{id:"app.salasana-placeholder",defaultMessage:"Salasana",description:"Placeholder teksti salasana-kent\xe4ss\xe4"},PlaceholderSalasanaUudestaan:{id:"app.salasana-uudelleen-placeholder",defaultMessage:"Salasana Uudestaan",description:"Placeholder teksti salasananuudelleen-kent\xe4ss\xe4"}});var F=function(){var t=Object(i.useContext)(St),e=t.state,a=t.dispatch,r=Object(i.useState)(0),s=Object(u.a)(r,2),o=s[0],d=s[1],p=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=Object(c.a)(e.vastaukset),r=y(n,i);void 0===r?(r={tyyppi:!0,vaihtoehto_id:t,"k\xe4ytt\xe4j\xe4_id":e.k\u00e4ytt\u00e4j\u00e4ID},J(r).then((function(t){r.id=t.id.toString(),r.vastausp\u00e4iv\u00e4m\u00e4\u00e4r\u00e4=t.vastausp\u00e4iv\u00e4m\u00e4\u00e4r\u00e4.toString(),i.push(r),a({type:"MuutaVastaukset",payload:i})})).catch((function(t){console.log(t)}))):(r.tyyppi=!r.tyyppi,console.log(r.tyyppi),W(r).then((function(t){a({type:"MuutaVastaukset",payload:i})})).catch((function(t){console.log(t)})))},h=function(t){if(void 0!==t)return t.id},j=function(){e.n\u00e4yt\u00e4Graafi?a({type:"PiilotaGraafi"}):a({type:"N\xe4yt\xe4Graafi"})},y=function(t,e){if(void 0!==t)return e.find((function(e){return e.id==t}))},b=y(e.valittuTenttiIndex,e.tentit);return Object(n.jsxs)("div",{style:{width:"100%"},children:[Object(n.jsx)("div",{style:{display:"flex",flexDirection:"row",width:"100%",flexWrap:"wrap",marginBottom:10},children:e.tentit.map((function(t,i){return Object(n.jsx)(x.a,{color:"primary",variant:t.id===h(b)?"outlined":"text",onClick:function(){return function(t){a({type:"Lataa"}),G(t.id).then((function(n){var i=[],r=JSON.parse(JSON.stringify(e.tentit)),s=y(t.id,r);n.forEach((function(t){var e=M(t);i.push(e)})),s.kysymykset=i,a({type:"MuutaTenttej\xe4",payload:r}),a({type:"LopetaLataus"})})).catch((function(t){a({type:"LopetaLataus"}),console.log(t)})),E(e.k\u00e4ytt\u00e4j\u00e4ID,t.id).then((function(t){a({type:"MuutaVastaukset",payload:t.data})})).catch((function(t){console.log(t)})),a({type:"PiilotaVastaukset"}),a({type:"MuutaValittuTentti",payload:t.id})}(t)},children:t.nimi},i)}))}),e.loading?Object(n.jsx)("div",{style:{width:"100%"},children:Object(n.jsx)("img",{src:V,alt:"Loading..."})}):e.n\u00e4yt\u00e4Graafi?Object(n.jsxs)("div",{children:[function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case 0:return t={labels:["Oikein","V\xe4\xe4rin"],datasets:[{label:"# of Votes",data:[43,7],backgroundColor:["rgba(54, 162, 235, 0.2)","rgba(255, 99, 132, 0.2)"],borderColor:["rgba(54, 162, 235, 1)","rgba(255, 99, 132, 1)"],borderWidth:1}]},Object(n.jsx)(I.Pie,{data:t});case 1:return t={labels:["Oikein","V\xe4\xe4rin"],datasets:[{label:"# of Votes",data:[43,7],backgroundColor:["rgba(54, 162, 235, 0.2)","rgba(255, 99, 132, 0.2)"],borderColor:["rgba(54, 162, 235, 1)","rgba(255, 99, 132, 1)"],borderWidth:1}]},Object(n.jsx)(I.Doughnut,{data:t});case 2:var a={scales:{yAxes:[{ticks:{beginAtZero:!0}}]}};return t={labels:["Aritmetiikka","Todenn\xe4k\xf6isyys","Geometria","Trigonometria","Joukko-oppi"],datasets:[{label:"V\xe4\xe4rin",data:[2,1,3,1,0],backgroundColor:"rgb(255, 99, 132)"},{label:"Oikein",data:[8,9,7,9,10],backgroundColor:"rgb(54, 162, 235)"}]},Object(n.jsx)(I.Bar,{data:t,options:a});case 3:a={scales:{yAxes:[{stacked:!0,ticks:{beginAtZero:!0}}],xAxes:[{stacked:!0}]}};return t={labels:["Aritmetiikka","Todenn\xe4k\xf6isyys","Geometria","Trigonometria","Joukko-oppi"],datasets:[{label:"V\xe4\xe4rin",data:[2,1,3,1,0],backgroundColor:"rgb(255, 99, 132)"},{label:"Oikein",data:[8,9,7,9,10],backgroundColor:"rgb(54, 162, 235)"}]},Object(n.jsx)(I.Bar,{data:t,options:a});case 4:a={scale:{ticks:{beginAtZero:!0}}};return t={labels:["Aritmetiikka","Todenn\xe4k\xf6isyys","Geometria","Trigonometria","Joukko-oppi"],datasets:[{label:"Oikein",data:[8,9,7,9,10],backgroundColor:"rgb(54, 162, 235, 0.2)"}]},Object(n.jsx)(I.Radar,{data:t,options:a})}return t}(o),Object(n.jsxs)("div",{style:{paddingTop:20},children:[Object(n.jsx)(x.a,{color:"primary",variant:"contained",onClick:j,children:"Piilota Graafi"}),Object(n.jsx)(x.a,{color:"primary",variant:"contained",onClick:function(){var t=o;4===t?t=0:t+=1,d(t)},children:"Graafi "+o})]})]}):void 0!==b&&Object(n.jsxs)("div",{style:{width:"100%"},children:[b.kysymykset.map((function(t){return Object(n.jsx)(S,{handleCheckboxChange:p,kysymys:t},t.id)})),Object(n.jsx)(x.a,{color:"primary",variant:"contained",onClick:function(){e.n\u00e4yt\u00e4Vastaukset?a({type:"PiilotaVastaukset"}):a({type:"N\xe4yt\xe4Vastaukset"})},children:e.n\u00e4yt\u00e4Vastaukset?Object(n.jsx)(l.a,Object(f.a)({},H.btnPiilotaVastaukset)):Object(n.jsx)(l.a,Object(f.a)({},H.btnN\u00e4yt\u00e4vastaukset))}),e.n\u00e4yt\u00e4Vastaukset&&Object(n.jsxs)(x.a,{color:"primary",variant:"contained",onClick:j,children:["   ",Object(n.jsx)(l.a,Object(f.a)({},H.btnN\u00e4yt\u00e4Graafi))]})]})]})},Z=a(298),$=a(293),q=a(43),Q=a.n(q),X=a(44),Y=a.n(X),tt=a(110),et=a.n(tt),at=a(111);var nt=function(t){var e=Object(i.useCallback)((function(e){var a=e[0],n=a&&URL.createObjectURL(a);t.getPictureFromDropzone(n);var i={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(localStorage.getItem("jwtToken"))}},r=new FormData;e.map((function(t){r.append("Test",t)})),r.append("customName","b\xf6\xf6"+a.name),A.a.post(P.baseURL+"/authenticated/upload",r,i)}),[]),a=Object(at.a)({onDrop:e}),r=a.getRootProps,s=a.getInputProps,o=a.isDragActive;return Object(n.jsxs)("div",Object(f.a)(Object(f.a)({style:{border:"2px solid black",width:500,paddingLeft:5,paddingRight:5}},r()),{},{children:[Object(n.jsx)("input",Object(f.a)({},s())),o?Object(n.jsx)("p",{children:"Drop the files here ..."}):Object(n.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"})]}))};var it=function(t){var e,a,r=Object(i.useState)(!1),s=Object(u.a)(r,2),o=s[0],c=s[1],l=Object(i.useState)(void 0),d=Object(u.a)(l,2),p=d[0],h=d[1],j=t.kysymys,y=j.kysymys,b=j.vastausVaihtoehdot,f=(j.oikeatVastaukset,function(t,e){return""===t?"tyhj\xe4_vastausvaihtoehto":"vastausvaihtoehto"+e});return Object(n.jsx)(w.a,{style:{width:"100%",padding:15},children:Object(n.jsx)("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"},children:Object(n.jsxs)("div",{style:{width:"100%"},children:[Object(n.jsx)(Z.a,{name:(e=y,a=t.kysymysnro,"Kysymyksen kuvaus"===e||void 0===e?"tyhj\xe4_kysymys":"kysymys"+a),fullWidth:!0,label:y,variant:"outlined",onChange:function(e){return function(e){t.handleInputChange(e.target.value,t.tenttiID,t.kysymysID)}(e)}}),Object(n.jsxs)("div",{style:{display:"flex",width:"100%",minHeight:75,maxHeight:200,paddingTop:10,paddingBottom:10,alignItems:"center"},children:[Object(n.jsx)($.a,{onClick:function(){t.handleDelete(t.tenttiID,t.kysymysID)},children:Object(n.jsx)(Q.a,{})}),o?p?Object(n.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center"},children:Object(n.jsx)("img",{src:p,width:150,height:150})}):Object(n.jsx)(nt,{getPictureFromDropzone:function(t){console.log(t),h(t)}}):Object(n.jsx)($.a,{onClick:function(){return c(!0)},children:Object(n.jsx)(et.a,{})})]}),b.map((function(e,a){return Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginTop:10},children:[Object(n.jsx)(O.a,{checked:e.oikea_vastaus,onChange:function(a){return function(e,a){t.handleInputChange(e.target.checked,t.tenttiID,t.kysymysID,a,!0)}(a,e.id)},inputProps:{"aria-label":"primary checkbox"}}),Object(n.jsx)(Z.a,{name:f(e.vaihtoehto,a),fullWidth:!0,label:e.vaihtoehto,variant:"outlined",onChange:function(a){return function(e,a){t.handleInputChange(e.target.value,t.tenttiID,t.kysymysID,a)}(a,e.id)}}),Object(n.jsx)($.a,{onClick:function(){return function(e){t.handleDelete(t.tenttiID,t.kysymysID,e)}(e.id)},children:Object(n.jsx)(Q.a,{})})]},a)})),Object(n.jsx)("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(n.jsx)($.a,{name:"Lis\xe4\xe4Vastausvaihtoehto",onClick:function(){t.handleAdding(t.tenttiID,t.kysymysID)},children:Object(n.jsx)(Y.a,{})})})]})})})},rt=function(t){return{vaihtoehto:"",oikea_vastaus:!1,kysymys_id:t}},st=function(){var t=Object(m.a)(v.a.mark((function t(){var e,a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwtToken"))}},t.prev=1,t.next=4,A.a.get(P.baseURL+"/authenticated/tentti/",e);case 4:if("OK"!==(a=t.sent).statusText){t.next=10;break}return console.log("Tentit haettu"),t.abrupt("return",a);case 10:throw"Tenttihaussa ongelmia";case 11:t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(1),t.t0;case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(){return t.apply(this,arguments)}}(),ot=function(){var t=Object(m.a)(v.a.mark((function t(e){var a,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwtToken"))}},t.prev=1,t.next=4,A.a.post(P.baseURL+"/authenticated/tentti/",e,a);case 4:if("OK"!==(n=t.sent).statusText){t.next=9;break}return t.abrupt("return",n.data.toString());case 9:throw"Tenttilis\xe4yksess\xe4 ongelmia";case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(1),t.t0;case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}(),ut=function(){var t=Object(m.a)(v.a.mark((function t(e){var a,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwtToken"))}},t.prev=1,t.next=4,A.a.delete(P.baseURL+"/authenticated/tentti/"+e,a);case 4:if("OK"!==(n=t.sent).statusText){t.next=9;break}return t.abrupt("return",n);case 9:throw"Tentin poistossa ongelmia";case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(1),t.t0;case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}(),ct=function(){var t=Object(m.a)(v.a.mark((function t(e,a){var n,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwtToken"))}},t.prev=1,t.next=4,A.a.put(P.baseURL+"/authenticated/tentti/"+e,a,n);case 4:if("OK"!==(i=t.sent).statusText){t.next=9;break}return t.abrupt("return",i);case 9:throw"Tentin muokkauksessa ongelmia";case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(1),t.t0;case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,a){return t.apply(this,arguments)}}(),lt=function(){var t=Object(m.a)(v.a.mark((function t(e){var a,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwtToken"))}},t.prev=1,t.next=4,A.a.post(P.baseURL+"/authenticated/kysymys/",e,a);case 4:if("OK"!==(n=t.sent).statusText){t.next=9;break}return t.abrupt("return",n.data.toString());case 9:throw"Kysymyksen lis\xe4ys ei onnistunut";case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(1),t.t0;case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}(),dt=function(){var t=Object(m.a)(v.a.mark((function t(e){var a,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwtToken"))}},t.prev=1,t.next=4,A.a.delete(P.baseURL+"/authenticated/kysymys/"+e,a);case 4:if("OK"!==(n=t.sent).statusText){t.next=9;break}return t.abrupt("return",n);case 9:throw"Kysymyksen poisto ei onnistunut";case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(1),t.t0;case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}(),pt=function(){var t=Object(m.a)(v.a.mark((function t(e,a){var n,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwtToken"))}},t.prev=1,t.next=4,A.a.put(P.baseURL+"/authenticated/kysymys/"+e,a,n);case 4:if("OK"!==(i=t.sent).statusText){t.next=9;break}return t.abrupt("return",i);case 9:throw"Kysymyksen muokkaus ei onnistunut";case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(1),t.t0;case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,a){return t.apply(this,arguments)}}();var ht=function(){var t=Object(i.useContext)(St),e=t.state,a=t.dispatch,r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=JSON.parse(JSON.stringify(e.tentit));if(void 0!==t){var r=u(t,i),s=u(n,r.kysymykset);if(void 0!==t&&void 0!==n){var o=rt(n);B(o).then((function(t){o.id=t,s.vastausVaihtoehdot.push(o),a({type:"MuutaTenttej\xe4",payload:i})})).catch((function(t){console.log(t)}))}else if(void 0!==t){var c=D();lt(c).then((function(t){c.id=t,_(r.id,c.id).then((function(t){r.kysymykset.push(c),a({type:"MuutaTenttej\xe4",payload:i})})).catch((function(t){console.log(t)}))})).catch((function(t){console.log(t)}))}}else{var l={nimi:"Tentin nimi",minimipisteet:"5",kysymykset:[]};ot(l).then((function(t){l.id=t,i.push(l),d(l.id),a({type:"MuutaTenttej\xe4",payload:i})})).catch((function(t){console.log(t)}))}},s=function(t,n){var i,r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=JSON.parse(JSON.stringify(e.tentit)),d=u(n,l);void 0!==(i=void 0===d.kysymykset?void 0:u(s,d.kysymykset))&&(r=u(o,i.vastausVaihtoehdot)),c?(r.oikea_vastaus=t,z(o,r).then((function(t){a({type:"MuutaTenttej\xe4",payload:l})})).catch((function(t){console.log(t)}))):void 0!==s&&void 0!==o?(r.vaihtoehto=t,z(o,r).then((function(t){a({type:"MuutaTenttej\xe4",payload:l})})).catch((function(t){console.log(t)}))):void 0!==s?(i.kysymys=t,pt(s,i).then((function(t){a({type:"MuutaTenttej\xe4",payload:l})})).catch((function(t){console.log(t)}))):(d.nimi=t,ct(n,d).then((function(t){a({type:"MuutaTenttej\xe4",payload:l})})).catch((function(t){console.log(t)})))},o=function(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=JSON.parse(JSON.stringify(e.tentit)),o=u(t,s);void 0!==(n=void 0===o.kysymykset?void 0:u(i,o.kysymykset))&&u(r,n.vastausVaihtoehdot),void 0!==i&&void 0!==r?N(r).then((function(t){n.vastausVaihtoehdot=n.vastausVaihtoehdot.filter((function(t){return t.id!==r})),a({type:"MuutaTenttej\xe4",payload:s})})).catch((function(t){console.log(t)})):void 0!==i?dt(i).then((function(t){o.kysymykset=o.kysymykset.filter((function(t){return t.id!==i})),a({type:"MuutaTenttej\xe4",payload:s})})).catch((function(t){console.log(t)})):(s=s.filter((function(e){return e.id!==t})),ut(t).then((function(t){a({type:"MuutaTenttej\xe4",payload:s})})).catch((function(t){console.log(t)})))},u=function(t,e){if(void 0!==t&&void 0!==e)return e.find((function(e){return e.id===t}))},l=function(t){if(void 0!==t)return t.id},d=function(t){var n=Object(c.a)(e.testausTentit),i={id:t,nimi:"uusiTentti"+(n.length+1)};n.push(i),a({type:"Lis\xe4\xe4TestausTentti",payload:n})},p=function(t,e){return"Tentin nimi"===t?"tyhj\xe4_tentti":"tentti"+e},h=u(e.valittuTenttiIndex,e.tentit);return Object(n.jsxs)("div",{style:{width:"100%"},children:[Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%"},children:[e.tentit.map((function(t,i){return Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(n.jsx)("div",{onClick:function(){return function(t){G(t.id).then((function(n){var i=[],r=JSON.parse(JSON.stringify(e.tentit)),s=u(t.id,r);n.forEach((function(t){var e=M(t);i.push(e)})),s.kysymykset=i,a({type:"MuutaTenttej\xe4",payload:r})})).catch((function(t){console.log(t)})),a({type:"PiilotaVastaukset"}),a({type:"MuutaValittuTentti",payload:t.id})}(t)},children:Object(n.jsx)(Z.a,{name:p(t.nimi,i),color:t.id===l(e.valittuTenttiIndex)?"primary":"secondary",fullWidth:!0,label:t.nimi,variant:"outlined",onChange:function(e){return function(t,e){s(t.target.value,e.id)}(e,t)}})}),Object(n.jsx)($.a,{onClick:function(){return o(t.id)},children:Object(n.jsx)(Q.a,{})})]},i)})),Object(n.jsx)($.a,{name:"Lis\xe4\xe4TenttiButton",onClick:function(){return r()},children:Object(n.jsx)(Y.a,{})})]}),e.loading?Object(n.jsx)("div",{style:{width:"100%"},children:Object(n.jsx)("img",{src:V,alt:"Loading..."})}):void 0!==h&&h.kysymykset&&Object(n.jsxs)("div",{style:{width:"100%"},children:[h.kysymykset.map((function(t,e){return Object(n.jsx)(it,{tenttiID:h.id,kysymysID:t.id,handleInputChange:s,handleDelete:o,handleAdding:r,kysymys:t,kysymysnro:e},t.id)})),Object(n.jsx)("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",padding:15},children:Object(n.jsx)($.a,{name:"Lis\xe4\xe4KysymysButton",onClick:function(){return r(h.id)},children:Object(n.jsx)(Y.a,{})})})]})]})},jt=function(){var t=Object(m.a)(v.a.mark((function t(e){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A.a.post(P.baseURL+"/login/",e);case 3:if("OK"!==(a=t.sent).statusText){t.next=8;break}return t.abrupt("return",a);case 8:throw"Kirjautuminen ei onnistunut";case 9:t.next=14;break;case 11:throw t.prev=11,t.t0=t.catch(0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),yt=function(){var t=Object(m.a)(v.a.mark((function t(e){var a,n,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{Authorization:"Bearer ".concat(e)}},n={},console.log(a),t.prev=3,t.next=6,A.a.post(P.baseURL+"/authenticated/loginToken/",n,a);case 6:if("OK"!==(i=t.sent).statusText){t.next=11;break}return t.abrupt("return",i);case 11:throw"Kirjautuminen ei onnistunut";case 12:t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(3),t.t0;case 17:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(e){return t.apply(this,arguments)}}(),bt=function(){var t=Object(m.a)(v.a.mark((function t(e){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A.a.post(P.baseURL+"/rekisteroi/",e);case 3:if(400!==(a=t.sent).status){t.next=6;break}throw"Rekister\xf6inti ei onnistunut";case 6:if("OK"!==a.statusText){t.next=10;break}return t.abrupt("return",a);case 10:throw"Rekister\xf6inti ei onnistunut";case 11:t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(0),t.t0;case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),ft=a(18),kt=a.n(ft),vt=function(t){kt.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(t){t.addEventListener("mouseenter",kt.a.stopTimer),t.addEventListener("mouseleave",kt.a.resumeTimer)}}).fire({icon:"success",title:"Tervetuloa "+t})},mt=a(3);a(259);var xt=function(t){var e=t.color,a=void 0===e?"color":e,i=t.children,r=Object(mt.a)(t,["color","children"]);return Object(n.jsx)(x.a,Object(f.a)(Object(f.a)({className:"StoryButton",color:a,variant:"contained"},r),{},{children:i}))};var gt=function(){var t=function(){var t=Object(m.a)(v.a.mark((function t(){var e,a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={"k\xe4ytt\xe4j\xe4tunnus":p,salasana:b},t.prev=1,t.next=4,jt(e);case 4:a=t.sent,localStorage.setItem("jwtToken",a.data.token),vt(e.k\u00e4ytt\u00e4j\u00e4tunnus),C({type:"MuutaK\xe4ytt\xe4j\xe4ID",payload:a.data.user.id}),C({type:"MuutaK\xe4ytt\xe4j\xe4Rooli",payload:a.data.user.rooli}),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0),kt.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(t){t.addEventListener("mouseenter",kt.a.stopTimer),t.addEventListener("mouseleave",kt.a.resumeTimer)}}).fire({icon:"error",title:"Kirjautuminen ep\xe4onnistui"});case 16:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(){return t.apply(this,arguments)}}(),e=function(){var t=Object(m.a)(v.a.mark((function t(){var e;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==p){t.next=3;break}return kt.a.fire("Tyhj\xe4 k\xe4ytt\xe4j\xe4tunnus","Valitse itsellesi k\xe4ytt\xe4j\xe4tunnus","error"),t.abrupt("return");case 3:if(""!==b){t.next=6;break}return kt.a.fire("Tyhj\xe4 salasana","Valitse itsellesi salasana","error"),t.abrupt("return");case 6:if(b===O){t.next=9;break}return kt.a.fire("Salasanat eiv\xe4t t\xe4sm\xe4\xe4","Kirjoita molempiin salasanakenttiin sama salasana","error"),t.abrupt("return");case 9:return e={"k\xe4ytt\xe4j\xe4tunnus":p,salasana:b},t.prev=10,t.next=13,bt(e);case 13:kt.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(t){t.addEventListener("mouseenter",kt.a.stopTimer),t.addEventListener("mouseleave",kt.a.resumeTimer)}}).fire({icon:"success",title:"Rekister\xf6inti onnistui!"}),o(!s),t.next=22;break;case 18:return t.prev=18,t.t0=t.catch(10),kt.a.fire({position:"center",icon:"error",title:"Rekister\xf6inti ei onnistunut",showConfirmButton:!1,timer:2500}),t.abrupt("return");case 22:case"end":return t.stop()}}),t,null,[[10,18]])})));return function(){return t.apply(this,arguments)}}(),a=Object(i.useState)(!0),r=Object(u.a)(a,2),s=r[0],o=r[1],c=Object(i.useState)(""),d=Object(u.a)(c,2),p=d[0],h=d[1],j=Object(i.useState)(""),y=Object(u.a)(j,2),b=y[0],k=y[1],x=Object(i.useState)(""),g=Object(u.a)(x,2),O=g[0],w=g[1],T=Object(i.useContext)(St),C=(T.state,T.dispatch);return Object(n.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",paddingTop:100},children:[s?Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"50%",justifyContent:"space-between"},children:[Object(n.jsxs)("h1",{children:["  ",Object(n.jsx)(l.a,Object(f.a)({},H.titleKirjautuminen))]}),Object(n.jsx)(Z.a,{name:"username_field",style:{height:65},text:p,variant:"outlined",label:Object(n.jsx)(l.a,Object(f.a)({},H.PlaceholderK\u00e4ytt\u00e4j\u00e4tunnus)),onChange:function(t){return h(t.target.value)}}),Object(n.jsx)(Z.a,{name:"password_field",style:{height:65},text:b,variant:"outlined",type:"password",label:Object(n.jsx)(l.a,Object(f.a)({},H.PlaceholderSalasana)),onChange:function(t){return k(t.target.value)}})]}):Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"50%"},children:[Object(n.jsxs)("h1",{children:[" ",Object(n.jsx)(l.a,Object(f.a)({},H.titleTilinluonti))]}),Object(n.jsx)(Z.a,{style:{height:65},label:Object(n.jsx)(l.a,Object(f.a)({},H.PlaceholderK\u00e4ytt\u00e4j\u00e4tunnus)),text:p,variant:"outlined",onChange:function(t){return h(t.target.value)}}),Object(n.jsx)(Z.a,{style:{height:65},label:Object(n.jsx)(l.a,Object(f.a)({},H.PlaceholderSalasana)),text:b,type:"password",variant:"outlined",onChange:function(t){return k(t.target.value)}}),Object(n.jsx)(Z.a,{style:{height:65},label:Object(n.jsx)(l.a,Object(f.a)({},H.PlaceholderSalasanaUudestaan)),text:O,type:"password",variant:"outlined",onChange:function(t){return w(t.target.value)}})]}),Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"row",width:"50%",paddingTop:30,justifyContent:"flex-end"},children:[Object(n.jsx)(xt,{style:{marginRight:5},color:"primary",variant:"contained",onClick:function(){C({type:"MuutaPassword",payload:""}),C({type:"MuutaPasswordAgain",payload:""}),o(!s)},children:s?Object(n.jsx)(l.a,Object(f.a)({},H.btnUusiTili)):Object(n.jsx)(l.a,Object(f.a)({},H.btnTakaisinKirjautumiseen))}),s?Object(n.jsx)(xt,{name:"login_button",color:"primary",variant:"contained",onClick:t,children:Object(n.jsx)(l.a,Object(f.a)({},H.btnKirjaudu))}):Object(n.jsx)(xt,{color:"primary",variant:"contained",onClick:e,children:Object(n.jsx)(l.a,Object(f.a)({},H.btnLuoTili))})]})]})},Ot=a(296),wt=a(297),Tt={display:"flex",flex:1,flexDirection:"column",alignItems:"flex-start",paddingTop:20,marginBottom:50,marginLeft:"3%"},Ct={flexDirection:"column",display:"flex",justifyContent:"flex-start",alignItems:"flex-start"},Kt=Object(g.a)((function(t){return{root:{flexGrow:1},menuButton:{marginRight:t.spacing(2)},title:{flexGrow:1}}})),St=Object(i.createContext)(null),Vt=function(){window.localStorage.removeItem("vastaukset")},It={"n\xe4yt\xe4Vastaukset":!1,valittuTenttiIndex:void 0,vastaukset:[],loading:!1,tentit:[],admin:!1,"n\xe4yt\xe4Graafi":!1,"k\xe4ytt\xe4j\xe4ID":void 0,"k\xe4ytt\xe4j\xe4Rooli":void 0,testausTentit:[]},Lt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It,e=arguments.length>1?arguments[1]:void 0,a=JSON.parse(JSON.stringify(t));switch(e.type){case"MuutaTenttej\xe4":return a.tentit=e.payload,Vt(),a;case"N\xe4yt\xe4Vastaukset":return a.n\u00e4yt\u00e4Vastaukset=!0,a;case"PiilotaVastaukset":return a.n\u00e4yt\u00e4Vastaukset=!1,a;case"Lataa":return a.loading=!0,a;case"LopetaLataus":return a.loading=!1,a;case"MuutaValittuTentti":return a.valittuTenttiIndex=e.payload,a;case"MuutaVastaukset":return a.vastaukset=e.payload,a;case"LuoTentit":return a.tentit=e.payload,a;case"VaihdaK\xe4ytt\xe4j\xe4":return a.admin=e.payload,a;case"N\xe4yt\xe4Graafi":return a.n\u00e4yt\u00e4Graafi=!0,a;case"PiilotaGraafi":return a.n\u00e4yt\u00e4Graafi=!1,a;case"MuutaK\xe4ytt\xe4j\xe4ID":return a.k\u00e4ytt\u00e4j\u00e4ID=e.payload,a;case"MuutaK\xe4ytt\xe4j\xe4Rooli":return a.k\u00e4ytt\u00e4j\u00e4Rooli=e.payload,a;case"Lis\xe4\xe4TestausTentti":return a.testausTentit=e.payload,a;case"KirjauduUlos":var n=a.tentit;return(a=It).tentit=n,a;default:return a}},Dt="";function Mt(t){var e=Object(i.useReducer)(Lt,It),a=Object(u.a)(e,2),r=a[0],s=a[1],o=Object(i.useRef)(null);Object(i.useEffect)((function(){o.current=new WebSocket(Dt),o.current.onopen=function(){console.log("websocket connected")},o.current.onmessage=function(t){var e;e=t.data,kt.a.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:function(t){t.addEventListener("mouseenter",kt.a.stopTimer),t.addEventListener("mouseleave",kt.a.resumeTimer)}}).fire({icon:"success",title:e})},o.current.onclose=function(){console.log("websocket disconnected"),o.current=new WebSocket(Dt)},c(localStorage.getItem("jwtToken"))}),[]),Object(i.useEffect)((function(){void 0!==r.k\u00e4ytt\u00e4j\u00e4ID&&d().then((function(t){void 0!==t&&s({type:"LuoTentit",payload:t})}))}),[r.k\u00e4ytt\u00e4j\u00e4ID]);var c=function(){var t=Object(m.a)(v.a.mark((function t(e){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("null"!=e&&null!=e){t.next=3;break}return console.log("token is null"),t.abrupt("return",!1);case 3:return t.prev=3,t.next=6,yt(e);case 6:return a=t.sent,console.log(a),vt(a.data.User.k\u00e4ytt\u00e4j\u00e4tunnus),s({type:"MuutaK\xe4ytt\xe4j\xe4ID",payload:a.data.User.id}),s({type:"MuutaK\xe4ytt\xe4j\xe4Rooli",payload:a.data.User.rooli}),t.abrupt("return",a);case 14:if(t.prev=14,t.t0=t.catch(3),void 0!==t.t0.response){t.next=19;break}return console.log("No response from the server"),t.abrupt("return",!1);case 19:return 401===t.t0.response.status&&(localStorage.setItem("jwtToken",null),s({type:"KirjauduUlos"})),t.abrupt("return",!1);case 21:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(m.a)(v.a.mark((function t(){var e;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s({type:"Lataa"}),t.next=3,st().then((function(t){if(s({type:"LopetaLataus"}),void 0!==t.data)return t.data.forEach((function(t){t.kysymykset=[]})),t.data})).catch((function(t){}));case 3:return void 0===(e=t.sent)&&(e=[]),t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),p=function(){return void 0!==r.k\u00e4ytt\u00e4j\u00e4ID};Kt();return Object(n.jsx)(St.Provider,{value:{state:r,dispatch:s},children:Object(n.jsxs)("div",{children:[Object(n.jsx)(Ot.a,{position:"static",children:Object(n.jsxs)(wt.a,{children:[Object(n.jsx)(x.a,{color:"inherit",onClick:function(){t.vaihdaKieli()},children:Object(n.jsx)(l.a,Object(f.a)({},H.btnVaihdaKieli))}),p()&&Object(n.jsxs)("div",{children:["admin"===r.k\u00e4ytt\u00e4j\u00e4Rooli&&Object(n.jsx)(x.a,{name:"VaihdaK\xe4ytt\xe4j\xe4\xe4Button",onClick:function(){s({type:"VaihdaK\xe4ytt\xe4j\xe4",payload:!r.admin})},style:{color:"white"},children:r.admin?Object(n.jsx)(l.a,Object(f.a)({},H.btnVaihdaNormik\u00e4ytt\u00e4j\u00e4ksi)):Object(n.jsx)(l.a,Object(f.a)({},H.btnVaihdaAdminiksi))}),Object(n.jsx)(x.a,{name:"LogoutButton",onClick:function(){localStorage.setItem("jwtToken",null),s({type:"KirjauduUlos"})},style:{color:"white"},children:Object(n.jsx)(l.a,Object(f.a)({},H.btnKirjauduUlos))})]})]})}),Object(n.jsx)("div",{style:Tt,children:p()?Object(n.jsx)("div",{style:Ct,children:r.admin?Object(n.jsx)(ht,{}):Object(n.jsx)(F,{})}):Object(n.jsx)(gt,{})})]})})}Dt="wss://tentti-app.herokuapp.com",Object(l.c)([].concat(Object(c.a)(j.a),Object(c.a)(p.a)));var Pt={fi:y,en:b},Ut=navigator.language.split(/[-_]/)[0];var At=function(){var t=Object(i.useState)(Ut),e=Object(u.a)(t,2),a=e[0],r=e[1];return Object(n.jsx)(l.b,{locale:a,messages:Pt[a],children:Object(n.jsx)(Mt,{vaihdaKieli:function(){r("en"===a?"fi":"en")}})})};a(260);o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(At,{})}),document.getElementById("root"))}},[[261,1,2]]]);
//# sourceMappingURL=main.384c6f2e.chunk.js.map